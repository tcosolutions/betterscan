define("git/constants",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={urlBase:"/git",settingsTabName:"git"}}),define("git/api/project",["exports","utils"],function(e,t){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var s=a(t);e["default"]={create:function(e,t,a){return s["default"].apiRequest({type:"POST",url:"/project/git",data:e,success:t,error:a})},update:function(e,t,a,r){return s["default"].apiRequest({type:"PUT",url:"/project/git/"+e,data:t,success:a,error:r})},getGitSnapshots:function(e,t,a,r,n){return s["default"].apiRequest({type:"GET",url:"/project/"+e+"/git_snapshots/"+t+"?"+s["default"].toUrlParams(a),success:r,error:n})}}}),define("git/components/_new",["exports","git/api/project","components/mixins/form","components/mixins/loader","components/mixins/tabs","components/generic/toggle_switch","components/generic/helper","react","flash_messages","routing","settings"],function(e,t,a,s,r,n,l,i,o,p,c){"use strict";function u(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var d=u(t),m=u(a),f=(u(s),u(r),u(n)),h=u(l),g=u(i),b=u(o),v=u(c),E=g["default"].createClass({displayName:"NewProjectForm",mixins:[m["default"]],updateData:function(e){var t=$.extend({},e.data);t.tags&&(t.tags=t.tags.join(", ")),this.setState(t)},componentWillReceiveProps:function(e){this.updateData(e)},componentWillMount:function(){this.flashMessagesService=b["default"].getInstance(),this.updateData(this.props)},getInitialState:function(){return{"public":!1}},isDirty:function(){return this.props.data?void 0!==this.state.description&&this.props.data.description!=this.state.description||void 0!==this.state.name&&this.props.data.name!=this.state.name||void 0!==this.state.url&&this.props.data.url!=this.state.url||void 0!==this.state["public"]&&this.props.data["public"]!=this.state["public"]:!1},validateName:function(){return-1===this.state.name.indexOf("/")?!0:!1},handleSubmit:function(e){e&&e.preventDefault();var t=(this.props,this.state,{name:this.state.name,url:this.state.url,"public":this.state["public"],description:this.state.description});if(void 0!==this.state.name&&!this.validateName())return void this.addFieldError("name",'A slash "/" is not allowed within the project name.');if(this.validate(t)){this.disable();var a,s;a=function(e){this.flashMessagesService.postMessage({type:"info",description:"Your project has been created and is currently being analyzed!"}),p.redirectTo(p.makeUrl("/project/"+e.project.permalink))}.bind(this),s=function(e){if(this.isMounted()){var t=e.responseJSON;t.message&&this.flashMessagesService.postMessage({type:"danger",description:t.message}),this.parseApiErrorData(t),this.enable()}}.bind(this),d["default"].create(t,a,s)}},render:function(){var e,t=(this.props,this.state),a=this;t.disabled&&(e=g["default"].createElement("i",{className:"fa fa-refres fa-spin"}));var s,r,n=g["default"].createElement("button",{className:"btn btn-primary",type:"submit",disabled:t.disabled},"Continue",e),l=v["default"].providers["project.new.urlChecker"]||[];l.forEach(function(e){e.regex.test(t.url)&&(r=e.getMessage(a))}),s=g["default"].createElement("div",null,g["default"].createElement("div",{className:"form-group"},g["default"].createElement("h4",null,g["default"].createElement("label",{htmlFor:"name"},"Name")),this.formatFieldError("name"),g["default"].createElement("input",{id:"name",className:"form-control",placeholder:"Project name",value:this.state.name,onChange:this.setter("name")})),g["default"].createElement("div",{className:"form-group"},g["default"].createElement("h4",null,g["default"].createElement("label",{htmlFor:"url"},"URL")),this.formatFieldError("url"),g["default"].createElement("input",{id:"url",className:"form-control",placeholder:"Git Repo - Clone with HTTPS (i.e https://github.com/user/project)",value:this.state.url,onChange:this.setter("url")}),r));var i=g["default"].createElement(h["default"],null,g["default"].createElement("p",null,g["default"].createElement("strong",null,"Private")," projects and their analyses are only visible to yourself and your collaborators.",g["default"].createElement("br",null),g["default"].createElement("strong",null,"Public")," project on the other hand, will be open to the public.")),o=function(e){this.setState({"public":e})}.bind(this),p=g["default"].createElement(f["default"],{onText:"public",offText:"private",on:this.state["public"],onChange:o});return g["default"].createElement("div",null,g["default"].createElement("form",{ref:"form",id:"project-form",role:"form",onSubmit:this.handleSubmit},g["default"].createElement("fieldset",{disabled:this.state.disabled},this.formatErrorMessage(),g["default"].createElement("div",{className:"form-group"},g["default"].createElement("h4",null,g["default"].createElement("label",{htmlFor:"public"},"Privacy ",i)),this.formatFieldError("public"),p),s,g["default"].createElement("div",{className:"form-group"},g["default"].createElement("h4",null,g["default"].createElement("label",{htmlFor:"description"},"Description (optional)")),this.formatFieldError("description"),g["default"].createElement("textarea",{id:"description",className:"form-control",placeholder:"A short description of your project.",autofocus:"true",rows:4,value:this.state.description,onChange:this.setter("description")})),n)))}});e["default"]=E}),define("git/components/_settings",["exports","git/api/project","react","components/mixins/form","utils"],function(e,t,a,s,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var l=n(t),i=n(a),o=n(s),p=n(r),c=i["default"].createClass({displayName:"GitSettings",mixins:[o["default"]],statics:{isApplicable:function(e){return["admin","owner"].some(function(t){return e.user_role==t})&&"git"==e.source}},getInitialState:function(){var e={fetchRemoteFailed:!1};return e.url=this.props.project.git.url,e},componentDidMount:function(){p["default"].trackEvent("Usage","PS: Git settings viewed")},setURL:function(e){this.setState({url:e.target.value})},submitForm:function(e){if(e.preventDefault(),this.validate()){var t=function(){this.setState({disabled:!1}),void 0!==this.props.onChange&&this.props.onChange()}.bind(this),a=function(e){this.setState({disabled:!1}),this.parseApiErrorData(e.responseJSON)}.bind(this);this.disable(),l["default"].update(this.props.project.pk,{overwrite:!0,fetch:!0,name:"origin",url:this.state.url},t,a)}},render:function(){var e=this.props.project,t=this.props.project.git,a=i["default"].createElement("input",{className:"form-control",id:"url",placeholder:"git@github.com/<username>/<repo>.git",defaultValue:t.url||"",required:"true",autofocus:"true",onChange:this.setter("url"),disabled:this.state.disabled}),s=i["default"].createElement("div",{className:"col-xs-12"},i["default"].createElement("p",{className:"alert alert-info"},"It seems that we have not fetched this repository yet..."));return void 0!==e.fetched_at&&(s="failed"===e.fetch_status?i["default"].createElement("div",{className:"col-xs-12"},i["default"].createElement("div",{className:"alert alert-warning"},i["default"].createElement("p",null,"We cannot fetch the repository at the given URL."),i["default"].createElement("p",null,"Please make sure that the URL is correct and that you installed the required SSH certificate."),i["default"].createElement("pre",null,i["default"].createElement("code",null,e.fetch_error)))):"succeeded"===e.fetch_status?i["default"].createElement("div",{className:"col-xs-12"},i["default"].createElement("div",{className:"alert alert-success"},i["default"].createElement("p",{className:"space-bottom-20"},"We successfully fetched this repository on ",i["default"].createElement("strong",null,e.fetched_at),"."))):i["default"].createElement("div",{className:"col-xs-12"},i["default"].createElement("div",{className:"alert alert-success"},i["default"].createElement("p",{className:"space-bottom-20"},"We never fetched this project so far.")))),i["default"].createElement("div",{className:"content-box"},i["default"].createElement("div",{className:"head"},i["default"].createElement("h3",null,"Git Settings")),i["default"].createElement("div",{className:"body clearfix"},i["default"].createElement("div",{className:"row"},i["default"].createElement("div",{className:"col-xs-12"},i["default"].createElement("form",{ref:"form",id:"remote_form",className:"form-horizontal",role:"form"},this.formatErrorMessage("url"),i["default"].createElement("div",{className:"form-group"},i["default"].createElement("div",{className:"col-xs-12"},i["default"].createElement("label",{htmlFor:"url"},"URL"),this.formatFieldError("url"),a),s,i["default"].createElement("div",{className:"col-xs-12"},i["default"].createElement("p",null,"If you use SSH to access your repository, please add the following public key:"),i["default"].createElement("pre",null,i["default"].createElement("code",null,t.public_key)))),i["default"].createElement("button",{disabled:this.state.disabled,className:"btn btn-large btn-primary pull-right",onClick:this.submitForm},"Update ",this.state.disabled?i["default"].createElement("i",{className:"fa fa-refresh fa-spin"}):""))))))}});e["default"]=c}),define("git/components/_commits",["exports","react","components/mixins/loader","components/generic/offset_paginator","utils","routing","git/api/project","moment"],function(e,t,a,s,r,n,l,i){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var p=o(t),c=o(a),u=o(s),d=o(r),m=o(l),f=o(i),h=p["default"].createClass({displayName:"SnapshotList",propTypes:{projectId:p["default"].PropTypes.string.isRequired,snapshotGroups:p["default"].PropTypes.array.isRequired,branch:p["default"].PropTypes.string,onClick:p["default"].PropTypes.func,params:p["default"].PropTypes.object.isRequired,deepLink:p["default"].PropTypes.string},getDefaultProps:function(){return{snapshotGroups:[],projectId:""}},render:function(){var e=this.props.snapshotGroups.map(function(e){return p["default"].createElement(g,{snapshots:e.snapshots,title:e.title,projectId:this.props.projectId,branch:this.props.branch,onClick:this.props.onClick,params:this.props.params,deepLink:this.props.deepLink})}.bind(this));return p["default"].createElement("div",{className:"snapshot-groups"},e)}}),g=p["default"].createClass({displayName:"SnapshotGroup",propTypes:{title:p["default"].PropTypes.string.isRequired,projectId:p["default"].PropTypes.string.isRequired,snapshots:p["default"].PropTypes.array.isRequired,branch:p["default"].PropTypes.string,onClick:p["default"].PropTypes.func,params:p["default"].PropTypes.object.isRequired,deepLink:p["default"].PropTypes.string},render:function(){var e=this.props.snapshots.map(function(e){return p["default"].createElement(b,{snapshot:e,branch:this.props.branch,projectId:this.props.projectId,params:this.props.params,onClick:this.props.onClick,deepLink:this.props.deepLink,key:e.pk})}.bind(this));return p["default"].createElement("div",{className:"snapshot-list"},p["default"].createElement("h4",null,this.props.title),e)}}),b=p["default"].createClass({displayName:"SnapshotItem",propTypes:{projectId:p["default"].PropTypes.string.isRequired,snapshot:p["default"].PropTypes.object.isRequired,branch:p["default"].PropTypes.string,onClick:p["default"].PropTypes.func,params:p["default"].PropTypes.object.isRequired,deepLink:p["default"].PropTypes.string},analyze:function(){return m["default"].analyze(this.props.projectId),!1},onClick:function(){void 0!==this.props.onClick&&this.props.onClick()},render:function(){var e=f["default"].unix(this.props.snapshot.committer_date_ts).format("HH:mm");if(this.props.snapshot.analyzed){var t={};this.props.branch&&(t.branch=this.props.branch);var a=void 0,s=this.props.snapshot.diff;s&&(s.issues_added||s.issues_fixed)&&(a=p["default"].createElement("li",{className:"issues-trend"},p["default"].createElement("i",{className:"label label-danger"},p["default"].createElement("i",{className:"fa fa-chevron-down"})," ",s.issues_added),"Â ",p["default"].createElement("i",{className:"label label-success"},p["default"].createElement("i",{className:"fa fa-chevron-up"}),s.issues_fixed)));var r="/project/"+this.props.projectId+"/snapshot/"+this.props.snapshot.pk;this.props.deepLink&&(r+="/"+this.props.deepLink);var l=n.makeUrl(r,t,this.props.params,["limit","offset"]);return p["default"].createElement("div",{className:"list-item snapshot-item"},p["default"].createElement(n.A,{href:l,onClick:function(){this.onClick()}.bind(this)},p["default"].createElement("div",{className:"content"},p["default"].createElement("div",{className:"meta clearfix"},p["default"].createElement("ul",{className:"menu pull-right"},p["default"].createElement("li",{className:"author"},this.props.snapshot.author_name),p["default"].createElement("li",{className:"date"},e),a)),p["default"].createElement("p",{className:"log"},d["default"].truncate(this.props.snapshot.log,80)))))}return p["default"].createElement("div",{className:"list-item snapshot-item no-link"},p["default"].createElement("div",{className:"content"},p["default"].createElement("div",{className:"meta clearfix"},p["default"].createElement("span",{className:"label label-warning pull-left"},"No data available"),p["default"].createElement("ul",{className:"menu pull-right"},p["default"].createElement("li",{className:"author"},this.props.snapshot.author_name),p["default"].createElement("li",{className:"date"},e))),p["default"].createElement("p",{className:"log"},d["default"].truncate(this.props.snapshot.log,80))))}}),v=p["default"].createClass({displayName:"SnapshotListComponent",mixins:[c["default"]],resources:function(e){var t={offset:void 0!==e.params.offset?e.params.offset:0,limit:void 0!==e.params.limit?e.params.limit:20,set_default:void 0!==e.setDefault?!0:!1,annotate:!0};return[{name:"snapshots",endpoint:m["default"].getGitSnapshots,params:[e.projectId,e.branch,t],mapping:{snapshots:"snapshots",count:"count"}}]},groupSnapshots:function(e){var t=[],a=void 0,s={lastDay:"MMMM Do YYYY",sameDay:"h:mmA",nextDay:"MMMM Do YYYY",lastWeek:"MMMM Do YYYY",nextWeek:"MMMM Do YYYY",sameElse:"MMMM Do YYYY"};for(var r in e){var n=e[r],l=f["default"].unix(n.committer_date_ts).calendar(null,s);(void 0===a||a.title!==l)&&(void 0!==a&&t.push(a),a={title:l,snapshots:[]}),a.snapshots.push(n)}return void 0!==a&&t.push(a),t},afterLoadingSuccess:function(e){return e.groupedSnapshots=this.groupSnapshots(e.snapshots),e},render:function(){var e=this.state.data;console.log("commits...");var t=p["default"].createElement(u["default"],{count:void 0!==e.count?parseInt(e.count):void 0,offset:void 0!==this.props.params.offset?parseInt(this.props.params.offset):0,limit:void 0!==this.props.params.limit?parseInt(this.props.params.limit):20,baseUrl:this.props.baseUrl,params:this.props.params});return p["default"].createElement("div",null,p["default"].createElement(h,{snapshotGroups:e.groupedSnapshots,projectId:this.props.projectId,onClick:this.props.onClick,branch:this.props.branch,params:this.props.params,deepLink:this.props.deepLink}),t)}});e["default"]=v}),define("git/components/_branch_selector",["exports","react","utils","routing"],function(e,t,a,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var n=r(t),l=(r(a),n["default"].createClass({displayName:"BranchSelector",propTypes:{branches:n["default"].PropTypes.arrayOf(n["default"].PropTypes.shape({name:n["default"].PropTypes.string.isRequired}).isRequired).isRequired,branch:n["default"].PropTypes.string,baseUrl:n["default"].PropTypes.string.isRequired,params:n["default"].PropTypes.object.isRequired},compareBranches:function(e,t){return e.name.toUpperCase()<t.name.toUpperCase()?-1:e.name.toUpperCase()>t.name.toUpperCase()?1:0},render:function(){var e=this.props.branches.sort(this.compareBranches).map(function(e){return n["default"].createElement("li",{key:e.name},n["default"].createElement(s.A,{href:s.makeUrl(this.props.baseUrl,{branch:e.name},this.props.params,["limit","offset"])},e.name))}.bind(this));return n["default"].createElement("span",null,n["default"].createElement("button",{type:"button",className:"selector branch dropdown-toggle","data-toggle":"dropdown"},n["default"].createElement("span",{className:"text"},this.props.branch?this.props.branch:"(no branch selected)"),n["default"].createElement("span",{className:"sr-only"},"Toggle Dropdown")),e.length?n["default"].createElement("ul",{className:"dropdown-menu selector-dropdown",role:"menu"},e):void 0)}}));e["default"]=l}),define("git/components/_commit_selector",["exports","react","utils","routing","./_commits","components/generic/modal","./_branch_selector","moment"],function(e,t,a,s,r,n,l,i){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var p=o(t),c=(o(a),o(r)),u=o(n),d=o(l),m=o(i),f=p["default"].createClass({displayName:"CommitSelector",propTypes:{snapshot:p["default"].PropTypes.any,branch:p["default"].PropTypes.string,project:p["default"].PropTypes.shape({pk:p["default"].PropTypes.string,branches:p["default"].PropTypes.any}).isRequired,baseUrl:p["default"].PropTypes.string.isRequired,params:p["default"].PropTypes.object.isRequired,deepLink:p["default"].PropTypes.string},render:function(){var e,t;if(this.props.snapshot){e=p["default"].createElement(u["default"],{ref:"commitModal",title:p["default"].createElement("div",null,p["default"].createElement("span",null,"Analyzed commits"),p["default"].createElement("div",{style:{display:"block",fontSize:"14px",fontWeight:"bolder",marginTop:"10px"}}," ",this.props.branch))},p["default"].createElement(c["default"],{onClick:this.closeModal,branch:this.props.branch,projectId:this.props.project.pk,baseUrl:this.props.baseUrl,params:this.props.params,deepLink:this.props.deepLink}));var a=m["default"].unix(this.props.snapshot.git_snapshot.committer_date_ts).calendar(null,{sameDay:"[Today] hh:mm A",lastDay:"[Yesterday] hh:mm A",lastWeek:"MM/DD/YYYY hh:mm A",sameElse:"MM/DD/YYYY hh:mm A"});t=p["default"].createElement(s.A,{className:"selector commit dropdown-toggle",onClick:this.clickCommitSelector},p["default"].createElement("span",{className:"text"},this.props.snapshot.git_snapshot.sha.slice(0,8)," (",a,")"))}var r="/project/"+this.props.project.pk;this.props.deepLink&&(r+="/"+this.props.deepLink);var n=p["default"].createElement(d["default"],{branch:this.props.branch,branches:this.props.project.git_branches,baseUrl:r,params:this.props.params});return p["default"].createElement("div",null,e,n,t)},clickCommitSelector:function(e){e.preventDefault(),this.refs.commitModal.open()},closeModal:function(){return this.refs.commitModal.close(),!0}});e["default"]=f}),define("git/components/_snapshot_selector",["exports","react","utils","routing","./_commit_selector"],function(e,t,a,s,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var l=n(t),i=(n(a),n(r)),o=l["default"].createClass({displayName:"GitSnapshotSelector",render:function(){var e=(this.state,this.props);return l["default"].createElement(i["default"],{baseUrl:e.baseUrl,params:e.params,project:e.project,snapshot:e.snapshot,branch:e.params.branch||(void 0!==e.snapshot?e.snapshot.branch.name:"(no branch defined)"),deepLink:e.deepLink})}});e["default"]=o}),define("git/settings",["exports","jquery","git/constants","git/components/_new","git/components/_settings","git/components/_snapshot_selector"],function(e,t,a,s,r,n){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(e,"__esModule",{value:!0});var i=(l(t),l(a),l(s)),o=l(r),p=l(n),c={providers:{"project.snapshot":[{name:"Git",source:"git",component:p["default"]}],"project.new":[{title:"Git",name:"git",component:i["default"]}],"project.settings":[{icon:"mark-git",title:"Git",name:"git",component:o["default"]}]},sourceSettings:{git:{editNameDisabled:!1,editDescriptionDisabled:!1,editPrivacyDisabled:!1}}};e["default"]=c}),require(["git/settings"],function(){}),define("boot",function(){});
//# sourceMappingURL=boot.min.js
//# sourceMappingURL=boot.min.js.map